<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CosteObra Gran Canaria</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

    <!-- Styles -->
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <div class="container">
        <!-- Header -->
        <header>
            <h1 class="main-title">
                Presupuesto de reformas en Gran Canaria al instante
            </h1>
            <p class="header-subtitle">Calcula el precio de tu reforma en Gran Canaria con costes
                claros y sin sorpresas.</p>
            <p class="header-desc">Presupuestos orientativos de reformas, fontanería, electricidad, alicatados y pintura
                en Gran Canaria.</p>
        </header>

        <div class="app-layout">
            <div class="main-content">
                <!-- Promo Section -->
                <section>
                    <div class="card promo-card">
                        <h3 class="promo-text">Calcula tu presupuesto online y contacta directamente por WhatsApp</h3>
                    </div>
                </section>

                <!-- Municipality Selection -->
                <section>
                    <h2 class="section-title">
                        1. Municipio de la reforma
                    </h2>
                    <p class="section-desc">Selecciona el municipio donde se realizará la obra:</p>
                    <div class="municipality-wrapper" style="margin-top: 1rem;">
                        <select id="municipality-select" class="input-field"
                            style="width: 100%; padding: 12px; font-size: 1rem;">
                            <!-- Options populated by JS -->
                        </select>
                    </div>
                </section>

                <!-- Services Selection -->
                <section>
                    <h2 class="section-title">
                        2. Servicios Requeridos
                    </h2>
                    <div id="services-container" class="space-y-4">
                        <!-- Accordions rendered by JS -->
                    </div>
                </section>

                <!-- Urgency Toggle -->
                <section>
                    <div class="card urgency-card">
                        <div>
                            <div id="urgency-title"
                                style="font-weight: bold; display: flex; align-items: center; gap: 8px;">
                                <!-- Alert Icon -->
                                <svg id="alert-icon" width="20" height="20" viewBox="0 0 24 24" fill="none"
                                    stroke="#888" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <circle cx="12" cy="12" r="10"></circle>
                                    <line x1="12" y1="8" x2="12" y2="12"></line>
                                    <line x1="12" y1="16" x2="12.01" y2="16"></line>
                                </svg>
                                <span>¿Es una urgencia?</span>
                            </div>
                            <div style="font-size: 0.8rem; color: #888;">
                                Servicio urgente (recargo fijo +15% del total). Sin negociación posterior.
                            </div>
                        </div>
                        <label class="switch">
                            <input type="checkbox" id="urgency-toggle">
                            <span class="slider"></span>
                        </label>
                    </div>
                </section>

                <!-- Footer -->
                <footer>
                    <p>CosteObra Gran Canaria © 2026</p>
                    <p>Servicio disponible en todos los municipios de Gran Canaria.</p>
                </footer>
            </div>

            <!-- Sticky Summary Column -->
            <div class="sticky-column">
                <!-- Summary Placeholder -->
                <div id="summary-placeholder" class="card sticky-bottom summary-placeholder">
                    <div style="text-align: center; color: #888;">
                        <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"
                            style="margin-bottom: 1rem; opacity: 0.5;">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                            <polyline points="14 2 14 8 20 8"></polyline>
                            <line x1="16" y1="13" x2="8" y2="13"></line>
                            <line x1="16" y1="17" x2="8" y2="17"></line>
                            <polyline points="10 9 9 9 8 9"></polyline>
                        </svg>
                        <p>Selecciona al menos 2 servicios o supera los 150€ para ver tu presupuesto orientativo.</p>
                    </div>
                </div>

                <div id="budget-summary-card" class="card sticky-bottom" style="display: none;">
                    <div class="summary-header">
                        <h3 style="color: #D4AF37; margin: 0;">Presupuesto estimado</h3>
                        <!-- Mini CTA -->
                        <a id="whatsapp-mini-link" href="#" target="_blank" rel="noopener noreferrer"
                            class="mini-cta-btn">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path
                                    d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z">
                                </path>
                            </svg>
                            Consultar
                        </a>
                    </div>
                    <p style="font-size: 0.8rem; color: #999; margin-bottom: 1rem; margin-top: 0.5rem;">
                        Cálculo final estimado.
                    </p>

                    <div style="margin-bottom: 1rem; font-size: 0.9rem;">
                        <div class="summary-row">
                            <span>Base Servicios:</span>
                            <span id="val-services">0.00 €</span>
                        </div>
                        <!-- Zone and Margin Hidden -->
                        <div id="row-zone" class="summary-row muted" style="display: none;">
                            <span id="lbl-zone">Ajuste Zona:</span>
                            <span id="val-zone">0.00 €</span>
                        </div>
                        <div class="summary-row muted" style="display: none;"> <!-- Margin Hidden -->
                            <span>Costes de gestión</span>
                            <span id="val-margin">0.00 €</span>
                        </div>

                        <div
                            style="font-size: 0.8rem; color: #888; margin-top: 8px; margin-bottom: 8px; font-style: italic;">
                            Presupuesto orientativo según características del servicio y ubicación.
                        </div>
                        <div id="row-urgency" class="summary-row urgent" style="display: none;">
                            <span>Urgencia (+15%):</span>
                            <span id="val-urgency">+0.00 €</span>
                        </div>
                        <div id="urgency-notice"
                            style="display: none; font-size: 0.75rem; color: #d35400; margin-top: 4px; margin-bottom: 8px;">
                            Servicio urgente: sujeto a disponibilidad inmediata del profesional. El precio final se
                            confirmará tras la valoración directa.
                        </div>



                        <div class="summary-total">
                            <span>TOTAL ESTIMADO:</span>
                            <div style="text-align: right;">
                                <span id="val-total" class="text-gold">0.00 €</span>
                                <div class="legal-disclaimer">
                                    ℹ️ Estimación orientativa, no vinculante. Precio y disponibilidad se confirmará por
                                    el profesional. IGIC no incluido.
                                </div>
                            </div>
                        </div>
                    </div>

                    <div style="margin-bottom: 1rem;">
                        <input type="text" id="input-name" class="input-field" placeholder="Nombre (Opcional)">
                        <textarea id="input-desc" class="textarea-field"
                            placeholder="Ej: fuga en baño, urgente, piso en Las Palmas"></textarea>
                        <p style="font-size: 0.75rem; color: #666; margin-top: 4px;">El profesional confirmará precio
                            final y disponibilidad tras revisar tu caso.</p>
                    </div>

                    <a id="whatsapp-link" href="#" target="_blank" rel="noopener noreferrer"
                        style="text-decoration: none;">
                        <button class="btn btn-whatsapp">
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <!-- Message Icon -->
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path
                                        d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z">
                                    </path>
                                </svg>
                                <span>Contactar por WhatsApp</span>
                            </div>
                            <span style="font-size: 0.75rem; font-weight: normal; opacity: 0.9;">Respuesta rápida para
                                reformas en Gran Canaria</span>
                        </button>
                    </a>
                    <div style="margin-top: 0.5rem; text-align: center;">
                        <p id="whatsapp-hint" style="font-size: 0.7rem; color: #444;">Enviar presupuesto por WhatsApp
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Logic -->
    <script src="script.js"></script>
</body>

</html>